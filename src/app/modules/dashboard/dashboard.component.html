<div class="min-h-screen bg-gray-100 py-6 px-4 sm:px-6 lg:px-8">
  <!-- Individual Dashboard -->
  <div *ngIf="!isCollector" class="max-w-7xl mx-auto">
    <div class="bg-white rounded-lg shadow p-6 mb-6">
      <h1 class="text-2xl font-bold text-gray-900 mb-4">
        Welcome, {{ currentUser?.firstName }}!
      </h1>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Points Card -->
        <div class="bg-green-50 rounded-lg p-6">
          <h2 class="text-lg font-semibold text-green-700 mb-2">Your Points</h2>
          <p class="text-3xl font-bold text-green-600">
            {{ currentUser?.points || 0 }}
          </p>
          <button
            (click)="openRedeemPoints()"
            class="mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
          >
            Redeem Points
          </button>
        </div>

        <!-- Active Requests Card -->
        <div class="bg-blue-50 rounded-lg p-6">
          <h2 class="text-lg font-semibold text-blue-700 mb-2">
            Active Requests
          </h2>
          <p class="text-3xl font-bold text-blue-600">
            {{ activeRequests?.length || 0 }}/3
          </p>
          <button
            routerLink="/collection/new"
            class="mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
          >
            New Request
          </button>
        </div>

        <!-- Total Collections Card -->
        <div class="bg-purple-50 rounded-lg p-6">
          <h2 class="text-lg font-semibold text-purple-700 mb-2">
            Total Collections
          </h2>
          <p class="text-3xl font-bold text-purple-600">
            {{ completedRequests?.length || 0 }}
          </p>
          <button
            routerLink="/collection/history"
            class="mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors"
          >
            View History
          </button>
        </div>
      </div>
    </div>

    <!-- Recent Requests -->
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-xl font-semibold mb-4">Recent Requests</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
              >
                Date
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
              >
                Types
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
              >
                Weight
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
              >
                Status
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
              >
                Actions
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr *ngFor="let request of recentRequests">
              <td class="px-6 py-4 whitespace-nowrap">
                {{ request.createdAt | date }}
              </td>
              <td class="px-6 py-4">
                <span
                  *ngFor="let waste of request.wastes"
                  class="inline-block px-2 py-1 mr-1 text-xs rounded-full"
                  [ngClass]="{
                    'bg-blue-100 text-blue-800': waste.type === 'plastic',
                    'bg-green-100 text-green-800': waste.type === 'glass',
                    'bg-yellow-100 text-yellow-800': waste.type === 'paper',
                    'bg-red-100 text-red-800': waste.type === 'metal'
                  }"
                >
                  {{ waste.type }}
                </span>
              </td>
              <td class="px-6 py-4">{{ request.totalWeight }}g</td>
              <td class="px-6 py-4">
                <span
                  class="px-2 py-1 text-xs rounded-full"
                  [ngClass]="{
                    'bg-yellow-100 text-yellow-800':
                      request.status === 'pending',
                    'bg-blue-100 text-blue-800': request.status === 'occupied',
                    'bg-green-100 text-green-800':
                      request.status === 'validated',
                    'bg-red-100 text-red-800': request.status === 'rejected'
                  }"
                >
                  {{ request.status }}
                </span>
              </td>
              <td class="px-6 py-4">
                <button
                  *ngIf="request.status === 'pending'"
                  (click)="editRequest(request)"
                  class="text-indigo-600 hover:text-indigo-900 mr-2"
                >
                  Edit
                </button>
                <button
                  *ngIf="request.status === 'pending'"
                  (click)="deleteRequest(request.id)"
                  class="text-red-600 hover:text-red-900"
                >
                  Delete
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Collector Dashboard -->
  <div *ngIf="isCollector" class="max-w-7xl mx-auto">
    <div class="bg-white rounded-lg shadow p-6 mb-6">
      <h1 class="text-2xl font-bold text-gray-900 mb-4">Collector Dashboard</h1>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Active Collections -->
        <div class="bg-blue-50 rounded-lg p-6">
          <h2 class="text-lg font-semibold text-blue-700 mb-2">
            Active Collections
          </h2>
          <p class="text-3xl font-bold text-blue-600">
            {{ activeCollections?.length || 0 }}
          </p>
          <button
            routerLink="/collection/active"
            class="mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
          >
            View Active
          </button>
        </div>

        <!-- Available Requests -->
        <div class="bg-green-50 rounded-lg p-6">
          <h2 class="text-lg font-semibold text-green-700 mb-2">
            Available Requests
          </h2>
          <p class="text-3xl font-bold text-green-600">
            {{ availableRequests?.length || 0 }}
          </p>
          <button
            routerLink="/collection/available"
            class="mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
          >
            Browse Requests
          </button>
        </div>

        <!-- Completed Collections -->
        <div class="bg-purple-50 rounded-lg p-6">
          <h2 class="text-lg font-semibold text-purple-700 mb-2">
            Completed Today
          </h2>
          <p class="text-3xl font-bold text-purple-600">
            {{ completedToday || 0 }}
          </p>
          <button
            routerLink="/collection/completed"
            class="mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors"
          >
            View History
          </button>
        </div>
      </div>
    </div>

    <!-- Current Collections -->
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-xl font-semibold mb-4">Current Collections</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
              >
                Address
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
              >
                Types
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
              >
                Est. Weight
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
              >
                Status
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
              >
                Actions
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr *ngFor="let collection of currentCollections">
              <td class="px-6 py-4">{{ collection.collectionAddress }}</td>
              <td class="px-6 py-4">
                <span
                  *ngFor="let waste of collection.wastes"
                  class="inline-block px-2 py-1 mr-1 text-xs rounded-full"
                  [ngClass]="{
                    'bg-blue-100 text-blue-800': waste.type === 'plastic',
                    'bg-green-100 text-green-800': waste.type === 'glass',
                    'bg-yellow-100 text-yellow-800': waste.type === 'paper',
                    'bg-red-100 text-red-800': waste.type === 'metal'
                  }"
                >
                  {{ waste.type }}
                </span>
              </td>
              <td class="px-6 py-4">{{ collection.totalWeight }}g</td>
              <td class="px-6 py-4">
                <span
                  class="px-2 py-1 text-xs rounded-full"
                  [ngClass]="{
                    'bg-blue-100 text-blue-800':
                      collection.status === 'occupied',
                    'bg-green-100 text-green-800':
                      collection.status === 'in_progress'
                  }"
                >
                  {{ collection.status }}
                </span>
              </td>
              <td class="px-6 py-4">
                <button
                  (click)="updateCollectionStatus(collection)"
                  class="text-indigo-600 hover:text-indigo-900"
                >
                  {{
                    collection.status === "occupied"
                      ? "Start Collection"
                      : "Complete"
                  }}
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
